/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Support convention plugins written in Groovy. Convention plugins are build scripts in
    // 'src/main' that automatically become available as plugins in the main build.
    // TODO: see if this package can be externalized as gradle plugins
    id 'groovy-gradle-plugin'
    id 'java-library'
    id 'maven-publish'
}

repositories {

    mavenLocal()
    gradlePluginPortal()
    jcenter()
    mavenCentral()
    maven {
        url findProperty('mavenRepository')
        credentials {
            username = System.getenv('MAVEN_REPO_USERNAME')
            password = System.getenv('MAVEN_REPO_PASSWORD')
        }
    }
}

publishing {
    publications {
        myPlatform(MavenPublication) {
            from components.java
        }
    }
    repositories {
        maven {
            // change to point to your repo, e.g. http://my.org/repo
            def releasesRepoUrl = "${mavenRepository}"
            def snapshotsRepoUrl = "${mavenSnapshotRepository}"
            url = version.endsWith('SNAPSHOT') ? snapshotsRepoUrl : releasesRepoUrl
        }
    }
}
